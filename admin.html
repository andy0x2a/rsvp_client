<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="RSVP">
    <meta name="keywords" content="wedding matt jen vancouver">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="src/lib/bootstrap/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="src/css/wedding.css">
</head>
<body>
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="index.html">Jen and Matt</a>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
            <ul class="nav nav-sidebar">
                <li class=""><a href="index.html">Home</a></li>
                <li class="active"><a href="#">RSVP</a></li>
            </ul>

        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">


            <div class="jumbotron">
                <div class="container">
                    <span style="text-align: center"><h1>Admin</h1> </span>
                </div>
            </div>


            <div class="col-sm-10 row " >
                <form name="pass" method="post" action="/#" id="pass">

                    <div class="col-sm-9 myInput">
                        <label for="adminPass">Password:</label>
                        <input id="adminPass" class="Input" type="password" name="adminPass" autocorrect="off" autocapitalize="off"
                               placeholder="Password"/>
                        <span class="error hidden">Invalid password </span>
                    </div>
                    <div class="col-sm-9 myInput">
                        <a href="#" class="button btn btn-default" id="submitPass">
                            <span id="submitPassSpan">Login</span>
                        </a>
                    </div>
                </form>
            </div>
            <div class="col-sm-10 adminConsole">

                <form name="admin" method="post" action="/#" id="rsvp">


                    <div>
                            <table  id="tbl" class="table table-hover">

                            <thead>
                            <tr>
                                <th>id</th>
                                <th>first Name</th>
                                <th>Last Name</th>
                                <th>phone Number</th>
                                <th>Email </th>
                                <th>Status</th>
                                <th>Meal</th>
                                <th>Address</th>
                                <th>association</th>
                                <th>Notes</th>
                                <th>Plus One</th>
                            </tr>
                            </thead>

                            </table>



                    </div>
                    <div class="col-sm-9 myInput">
                        <a href="#" class="button btn btn-default" id="submit">
                            <span id="button_submit_text">   Submit</span>
                        </a>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>

<script src="src/js/vendor/jquery-2.1.3.js"></script>
<script src="src/js/vendor/jquery.cookie.js"></script>
<script src="src/js/vendor/jquery.jsontotable.js"></script>
<script src="src/lib/bootstrap/js/bootstrap.min.js"></script>
   <script>

       var serverURL = "http://localhost:8080/";

       var adminPass;

       var getListOnSuccess = function(data) {

           $(".adminConsole").show();

           var body = $('<tbody></tbody>');

           $.each(data, function(i, item) {

               var rowStr = '<tr>' +

                       '<td>' + item.id + '</td>' +
                       '<td>' + item.firstName + '</td>' +
                       '<td>' + item.lastName + '</td>' +
                       '<td>' + item.phoneNumber + '</td>' +
                       '<td>' + item.email + '</td>' +
                       '<td>' + item.statusId + '</td>' +
                       '<td>' + item.mealId + '</td>' +
                       '<td>' + item.address + '</td>' +
                       '<td>' + item.association + '</td>' +
                       '<td>' + item.notes + '</td>' +
                       '<td>' + !!item.plusOneInfo + '</td>' +
                               '</row>';





               var row = $(rowStr);
               body.append(row);


           });
console.log(body);
           $("#tbl").append(body);
       };
       var getListOnError = function(data) {


           $(".adminConsole").hide();
           $(".error").removeClass('hidden');
       };


       var getList = function () {
           $.ajax( {
               url: serverURL + "admin/guestsJ",
               type: "GET",
               dataType:"json",
               contentType: 'application/json',
               headers: { 'Authorization': adminPass },
               success: getListOnSuccess,
               error:getListOnError
           });

       }


       $(document).ready(function () {

           $(".adminConsole").hide();

           $("#submitPass").on('click', function(e) {
           adminPass = $("#adminPass").val().trim();
           console.log(adminPass);


               $(".error").addClass('hidden');


               getList();

           });
           
       });
       
       
   </script>
</body>
</html>
